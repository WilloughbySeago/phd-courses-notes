% !TeX program = lualatex
\documentclass[fleqn]{NotesClass}

\strictpagecheck

\usepackage{csquotes}
\usepackage{subcaption}

\usepackage{tikz}
\usetikzlibrary{external}
\tikzexternalize[prefix=tikz-external/]

\usepackage{tikz-cd}
\AtBeginEnvironment{tikzcd}{\tikzexternaldisable}
\AtEndEnvironment{tikzcd}{\tikzexternalenable}

\usepackage[pdfauthor={Willoughby Seago},pdftitle={Notes from Algebraic Geometry Course},pdfkeywords={algebraic geometry},pdfsubject={Algebraic Geometry}]{hyperref}  % Should be loaded second last (cleveref last)
\colorlet{hyperrefcolor}{blue!60!black}
\hypersetup{colorlinks=true, linkcolor=hyperrefcolor, urlcolor=hyperrefcolor}
\usepackage[
capitalize,
nameinlink,
noabbrev
]{cleveref} % Should be loaded last

% My packages
\usepackage{NotesBoxes}
\usepackage{NotesMaths2}

\setmathfont[range={\int, \oint, \otimes, \oplus, \bigotimes, \bigoplus}]{Latin Modern Math}


% Highlight colour
\definecolor{my blue}{HTML}{084887}
\definecolor{my red}{HTML}{CA1551}
\definecolor{my green}{HTML}{17C3B2}
\definecolor{my yellow}{HTML}{F58A07}
\definecolor{my purple}{HTML}{CB9CF2}
\colorlet{highlight}{my green}

% Title page info
\title{Algebraic Geometry}
\author{Willoughby Seago}
\date{October 6th, 2025}
\subtitle{Notes from}
\subsubtitle{University of Glasgow}
\renewcommand{\abstracttext}{These are my notes from the SMSTC course \emph{Algebraic Geometry} taught by Dr Giulia Gugiatti and Prof Ivan Cheltsov. The lectures, and hence these notes, follow the \textit{Algebraic Geometry} notes of Andreas Gathmann. These notes were last updated at \printtime{} on \today{}.}

% Commands
% Maths
\newcommand{\subideal}{\trianglelefteq}
\newcommand{\affine}{\symbb{A}}
\newcommand{\ideal}[1]{\symfrak{#1}}
\newcommand{\isomorphic}{\cong}

\includeonly{appendices/comm-alg}

\begin{document}
    \frontmatter
    \titlepage
    \innertitlepage{}
    \tableofcontents
    % \listoffigures
    \mainmatter
    
    \chapter{Introduction}
    
    \section{Conventions and Notation}
    Throughout the notes the ground field, \(K\), will always be assumed to be \emph{algebraically closed}, up to the point where we introduce schemes.
    Taking \(K = \complex\) is usually reasonable.
    
    All rings, \(R\), are assumed to be \emph{commutative} with \emph{unity}.
    That \(J\) is an ideal of \(R\) will be denoted \(J \subideal R\).
    The ideal generated by a subset, \(S \subseteq R\), is denoted \(\langle S \rangle\).
    
    We write \(K[x_1, \dotsc, x_n]\) for the ring of polynomials with coefficients in \(K\) in the variables \(x_1, \dotsc, x_n\).
    We write \(f(a)\) to mean the evaluation of an element of this ring at the point \(a = (a_1, \dotsc, a_n) \in K^n\), and where no confusion may arise we'll usually call this point \(x = (x_1, \dotsc, x_n)\).
    
    \section{Motivation}
    This section contains various motivating examples of algebro-geometric thinking, in varying levels of precision.
    Since the goal is to motivate some precision may be lacking.
    
    \subsection{Systems of Polynomial Equations}
    When we first learned algebra in high school it was to study the zeros of polynomials.
    Later we learned linear algebra, which it can be argued is the study of the zeros of systems of linear equations.
    Algebraic geometry combines these two fundamental fields into the study of zeros of systems of polynomials.
    
    Given \(f_1, \dotsc, f_m \in K[x_1, \dotsc, x_n]\) the basic object of study of algebraic geometry is the \defineindex{affine variety}
    \begin{equation}
        X = \{x \in K^n \mid f_i(x) = 0 \text{ for } i = 1, \dotsc, m\}.
    \end{equation}
    What questions can we ask about this set?
    Just as a single complex polynomial, \(f \in \complex[x]\), cannot be solved exactly for \(\deg f > 4\) we cannot possibly hope to explicitly list the points in \(X\).
    Instead we reason about the geometric structure of the solutions.
    We will ask geometric questions about \(X\), which we then aim to answer by an algebraic study of the \(f_i\).
    
    In the following sections we will give several examples of the sorts of geometric objects which can arise.
    We will focus on the existence of connections to other areas of mathematics.
    
    \subsection{Riemann Surfaces}
    Fix some positive integer, \(n\).
    We can define a curve\footnote{Note that this is a \enquote{curve} since it's complex dimension is \(1\) (we'll define dimension of affine varieties later, for now just use your intuition for the dimension of a manifold). Of course, in our pictures this single complex dimension is drawn as two real dimensions.}
    \begin{equation}
        c_n = \{(x, y) \in \complex^2 \mid y^2 = (x - 1)(x - 2)(x - 3) \dotsm (x - 2n)\} \subseteq \complex^2.
    \end{equation}
    We can view the defining equation as defining the quantity \(y\).
    Since we have \(y^2 = \dotso\) to find the value of \(y\) we have to take a square root.
    What we get depends on the value of \(x\).
    For most cases, specifically \(x \ne 1, 2, \dotsc, 2n\), we have
    \begin{equation}
        y = \pm \sqrt{(x - 1)(x - 2) \dotsm (x - 2n)}.
    \end{equation}
    For \(x = 1, 2, \dotsc, 2n\) we have
    \begin{equation}
        y = 0.
    \end{equation}
    Consider what values \(y\) can take.
    For \(x \ne 1, \dotsc, 2n\) we have two copies of \(\complex\), one for \(+ \sqrt{(x-1) \dotsm (x - 2n)}\) and one for \(-\sqrt{(x - 1) \dotsm (x - 2n)}\).
    For \(x = 1, \dotsc, 2n\) we only have one possible value, \(0\).
    The picture this suggests is two copies of \(\complex\) identified at the points \(1, \dotsc, 2n\).
    
    However, this isn't quite right.
    We know that \(z \in \complex^{\times}\) doesn't have a distinguished choice of \(\sqrt{z}\).
    Upon passing once around the origin they are exchanged.
    For example, if we take the path \(x = r\e^{i\theta}\), with \(r \ge 0\) fixed and \(\theta \in [0, 2\pi]\) then \(\sqrt{x} = \sqrt{r} \e^{i\theta/2}\).
    Then at \(\theta = 0\) we get \(\sqrt{r}\) and at \(\theta = 2\pi\) we get \(-\sqrt{r}\).
    The result is that as we go around the points \(x = 1, \dotsc, 2n\) we move from one copy of \(\complex\) to the other.
    
    Fortunately, we know how to deal with this, we take branch cuts between zeros.
    Take both copies of \(\complex\), and perform branch cuts along the intervals \([1, 2], [3, 4], \dotsc, [2n - 1, 2n]\).
    For \(n = 3\) this produces \cref{fig:complex planes with branch cuts}.
    Now glue these along the cuts, which gives the picture
    % TODO
    Finally, because it makes things nicer, add two points at infinity, one for each copy of \(\complex\), compactifying everything to get the picture
    % TODO
    We see that this leaves us with a Riemann surface of genus \(g = n - 1\).
    This relates algebraic geometry to the theory of Riemann surfaces.
    
    \begin{figure}
        \centering
        \begin{subfigure}{0.8\textwidth}
            \tikzexternaldisable
            \tikzsetnextfilename{riemann-surface-1}
            \begin{tikzpicture}
                \draw [very thick, rounded corners=1, my blue, fill=my blue!50] (0, -2) -- (8, -2) -- (9, 0) -- (1, 0) -- cycle;
                \draw [very thick, rounded corners=1, my blue, fill=my blue!50] (0, -0.5) -- (8, -0.5) -- (9, 1.5) -- (1, 1.5) -- cycle;
                
                \foreach \i in {1, 3, 5} {
                    \fill [white]  (1 + \i, 0.5) .. controls (1.3 + \i, 0.7) and (1.7 + \i, 0.7) .. (2 + \i, 0.5) .. controls (1.7 + \i, 0.3) and (1.3 + \i, 0.3) .. (1 + \i, 0.5);
                    \fill [white] (1 + \i, -1) .. controls (1.3 + \i, -0.8) and (1.7 + \i, -0.8) .. (2 + \i, -1) .. controls (1.7 + \i, -1.2) and (1.3 + \i, -1.2) .. (1 + \i, -1);
                    \draw [thick, my red] (1 + \i, 0.5) .. controls (1.3 + \i, 0.7) and (1.7 + \i, 0.7) .. (2 + \i, 0.5);
                    \draw [thick, my red] (1 + \i, 0.5) .. controls (1.3 + \i, 0.3) and (1.7 + \i, 0.3) .. (2 + \i, 0.5);
                    \draw [thick, my red] (1 + \i, -1) .. controls (1.3 + \i, -0.8) and (1.7 + \i, -0.8) .. (2 + \i, -1);
                    \draw [thick, my red] (1 + \i, -1) .. controls (1.3 + \i, -1.2) and (1.7 + \i, -1.2) .. (2 + \i, -1);
                }
                \foreach \i in {1, 2, 3, 4, 5, 6} {
                    \fill [my red] (1 + \i, 0.5) circle [radius=0.05];
                    \fill [my red] (1 + \i, -1) circle [radius=0.05];
                }
            \end{tikzpicture}
            \caption{Branch cuts along alternate intervals.}
            \label{fig:complex planes with branch cuts}
        \end{subfigure}
        \caption{Producing a Riemann surface from a curve}
    \end{figure}
    
    We can change our curve to
    \begin{equation}
        \{(x, y) \in \complex^2 \mid y^2 = (x - 1)^2(x - 2)(x - 3) \dotsm (x - 2n)\} \subseteq \complex^2.
    \end{equation}
    Then the same analysis can be applied, except that we have a singular point at the repeated root, \(x = 1\).
    This relates algebraic geometry to singularity theory.
    
    \subsection{Lines on Spaces}
    Consider the surface
    \begin{equation}
        X = \{(x_1, x_2, x_3) \in \reals^3 \mid 1 + x_1^3 + x_2^3 + x_3^3 - (1 + x_1 + x_2 + x_3)\} \subseteq \reals^3.
    \end{equation}
    This is called the \defineindex{Clebsch surface}.
    This is a cubic surface because it's defined by a single cubic equation.
    It's possible to draw straight lines on this surface.
    One can ask how many such straight lines exist.
    The answer, surprisingly, is always 27, at least under some mild conditions.
    Cubic surfaces are actually a weird middle ground, between the infinite families of lines on a quadratic surface, and the general absence of lines on surfaces defined by any higher degree equation.
    
    The question of how many geometric objects of a certain type exist is one of enumerative geometry, which makes heavy use of algebraic geometry.
    
    \subsection{String Theory}
    Strings, world sheets, those are surfaces, physicists should care about algebraic geometry.
    
    \subsection{Curves in Space}
    Consider the following curve
    \begin{equation}
        X = \{(x_1, x_2, x_3) = (t^3, t^4, t^5) \mid t \in \complex\} \subseteq \complex^3.
    \end{equation}
    This is a parametric definition of this surface.
    We can equally define it explicitly as
    \begin{equation}
        X = \{(x_1, x_2, x_3) \mid x_1^3 = x_2x_3, x_2^2 = x_1x_3, x_3^2 = x_1^2x_2\} \subseteq \complex^3.
    \end{equation}
    This is a surface, so it's two (complex) dimensional.
    However, we need all three of these equations to define it, if we remove any of them we don't get the same surface.
    This is very different to the world of linear algebra, where we'd have linear defining relations.
    There any codimension \(d\) subspace can be defined by \(d\) (linear) equations.
    Here \(X\) is one-dimensional, so it has codimension \(2\), but we need three equations to define it.
    
    The general problem of taking an affine variety, \(X\), defined as the vanishing set of some polynomials, and determining its dimension is actually very hard.
    We can use Gr\"obner bases to do this, but the algebra is pretty unwieldy, and we're forced to use computers to solve it most of the time.
    A Gr\"obner basis is a certain generating set of the ideal generated by the polynomials defining the affine variety.
    Actually, even defining dimension for an arbitrary affine variety is not that straight forward, but for now the intuition from manifolds and vector spaces should be enough.
    
    \subsection{Different Fields}
    Over \(\reals\) or \(\complex\) we can use real or complex analytic methods to study the zeros of polynomials, and hence affine varieties.
    
    Over \(\rationals\) or finite fields we can use number theoretic techniques to study the zeros of polynomials, and hence affine varieties.
    
    For example, Fermat's last theorem can be stated as the study of the affine variety
    \begin{equation}
        X = \{(x_1, x_2, x_3) \in \rationals^3 \mid x_1^n + x_2^n = x_3^n\},
    \end{equation}
    where the question we ask is if this has any non-trivial points.
    
    \chapter{Affine Varieties}
    \section{Affine Varieties}
    \begin{dfn}{Affine Space}{}
        \define{Affine \(\symbb{n}\)-space}\index{affine n-space@affine \(n\)-space} over \(K\) is the set
        \begin{equation}
            \affine^n = \affine_K^n \coloneq \{(a_1, \dotsc, a_n) \mid a_i \in K \forall i = 1, \dotsc, n\}.
        \end{equation}
    \end{dfn}
    
    Note that as sets \(\affine^n = K^n\).
    However, we write \(\affine^n\) when we wish to forget the additional algebraic structure of \(K^n\), specifically the vector space and ring, that is, we want to forget about the ability to scale, add and multiply elements.
    
    For the time being we will take \(\affine^n\) as our ambient space.
    Then a polynomial, \(f \in K[x_1, \dotsc, x_n]\), defines a \defineindex{polynomial function}
    \begin{align}
        \affine^n &\to K\\
        a &\mapsto f(a).
    \end{align}
    We'll usually call this function \(f\) as well.
    
    \begin{dfn}{Affine Variety}{}
        Let \(S \subseteq K[x_1, \dotsc, x_n]\) be some set of polynomials.
        The \defineindex{zero locus} or \defineindex{vanishing set} of \(S\), denoted \(V(S)\), is all points of \(\affine^n\) on which the polynomial functions defined by polynomials in \(S\) vanish.
        That is,
        \begin{equation}
            V(S) \coloneq \{x \in \affine^n \mid f(x) = 0 \forall f \in S\} \subseteq \affine^n
        \end{equation}
        Any subset of \(\affine^n\) of this form is called an \defineindex{affine variety}.
    \end{dfn}
    
    \begin{wrn}
        Note that some authors require that affine varieties have the additional property of being irreducible.
        These authors would then call all sets like \(V(S)\) \define{affine algebraic sets}\index{affine algebraic set}.
    \end{wrn}
    
    \begin{ntn}{}{}
        If \(S = \{f_1, \dotsc, f_n\}\) is a finite set we write
        \begin{equation}
            V(S) = V(\{f_1, \dotsc, f_n\}) = V(f_1, \dotsc, f_n).
        \end{equation}
    \end{ntn}
    
    There are some properties we can immediately prove about affine varieties.
    
    \begin{lma}{Reversal of Inclusion}{lma:V reverses inclusion}
        If \(S_1 \subseteq S_2 \subseteq K[x_1, \dotsc, x_n]\) then \(V(S_2) \subseteq V(S_1)\).
        \begin{proof}
            Suppose \(x \in V(S_2)\).
            Then \(f(x) = 0\) for all \(f \in S_2\), and so certainly \(f(x) = 0\) for \(f \in S_1 \subseteq S_2\), and thus \(x \in V(S_1)\).
        \end{proof}
    \end{lma}
    
    \begin{lma}{Union}{lma:union of defining equations}
        If \(S_1, S_2 \subseteq K[x_1, \dotsc, x_n]\) then \(V(S_1) \cup V(S_2) = V(S_1 S_2)\) where
        \begin{equation}
            S_1 S_2 = \{fg \mid f \in S_1, g \in S_2\}.
        \end{equation}
        \begin{proof}
            We start by showing that \(V(S_1) \cup V(S_2) \subseteq V(S_1 S_2)\).
            Suppose that \(x \in V(S_1) \cup V(S_2)\).
            Then \(x \in V(S_1)\), so \(f(x) = 0\) for all \(f \in S_1\), and \(x \in V(S_2)\), so \(g(x) = 0\) for all \(g \in S_2\).
            Thus, for \(f \in S_1\) and \(g \in S_2\) we have \((fg)(x) = f(x)g(x) = 0 \cdot 0 = 0\), so \(x \in V(S_1S_2)\).
            
            We now show that \(V(S_1S_2) \subseteq V(S_1) \cup V(S_2)\).
            We do so by supposing that \(x \notin V(S_1) \cup V(S_2)\).
            Then there exist polynomials, \(f \in S_1\) and \(g \in S_2\), for which \(f(x) \ne 0\) and \(g(x) \ne 0\).
            Thus, \((fg)(x) = f(x)g(x) \ne 0\) (since we work in a field, so have no nonzero zero divisors).
            Thus, \(x \notin V(S_1S_2)\) since \(fg \in S_1S_2\).
            By the contrapositive then we have that if \(x \in V(S_1S_2)\) then \(x \in V(S_1) \cup V(S_2)\).
        \end{proof}
    \end{lma}
    
    \begin{lma}{Intersection}{lma:intersection of defining equations}
        Let \(J\) be an index set, and \(\{S_j\}_{j \in J}\) an indexed family of subsets of \(K[x_1, \dotsc, x_n]\).
        Then
        \begin{equation}
            \bigcap_{j \in J} V(S_j) = V\left( \bigcup_{j \in J} S_j \right).
        \end{equation}
        \begin{proof}
            Suppose \(x \in \bigcap_{j \in J} V(S_j)\).
            Then \(x \in V(S_j)\) for all \(j \in J\).
            Thus, \(f(x) = 0\) for all \(f \in S_j\) for all \(j \in J\).
            Thus, \(x \in V\left( \bigcup_{j \in J} S_j \right)\).
            
            Conversely, suppose \(x \in V\left( \bigcup_{j \in J} S_j \right)\).
            Then \(f(x) = 0\) for all \(f \in \bigcup_{j \in J} S_j\), which means \(f(x) = 0\) for all \(f \in S_j\) for any \(j \in J\), and therefore \(x \in \bigcap_{j \in J} V(S_j)\).
        \end{proof}
    \end{lma}
    
    We can also give some examples of simple affine varieties.
    
    \begin{exm}{Affine Varieties}{}
        \begin{enumerate}
            \item Affine \(n\)-space is itself an affine variety.
            Specifically, \(\affine^n = V(0)\), since the zero polynomial vanishes.
            \item The empty set is an affine variety.
            Specifically, \(\emptyset = V(1)\), since the constant polynomial at \(1\) vanishes nowhere.
            \item Any linear subspace of \(K^n = \affine^n\) is an affine variety since a linear subspace is defined by the vanishing of linear equations.
            \item If \(X \subseteq \affine^n\) and \(Y \subseteq \affine^m\) are affine varieties then \(X \times Y\) is too when viewed as a subspace of \(\affine^{m + n}\).
            The defining equations of \(X \times Y\) are those of \(X\) and \(Y\) where we view those of \(X\) as a function of \(x_1, \dotsc, x_m\) and those of \(Y\) as a function of \(x_{m + 1}, \dotsc, x_{m + n}\).
        \end{enumerate}
    \end{exm}
    
    \begin{remark}{}{}
        The above results say that \(\emptyset\) and \(\affine^n\) are both affine varieties, and that affine varieties are closed under finite union and arbitrary intersections.
        This is very close to the definition of a topology on \(\affine^n\) in terms of open sets, \(\emptyset\) and \(X\) should be open, and the topology should be closed under finite intersections and arbitrary unions.
        Notice how unions and intersections exchange roles.
        Instead what we have is actually the requirements to define a topology on \(\affine^n\) via the \emph{closed} sets.
        We'll do exactly this in . % TODO add reference to section on Zarisiki topology
    \end{remark}
    
    \begin{exm}{Affine \(1\)-Space}{}
        The only affine varieties in \(\affine^1\) are \(\affine^1\), \(\emptyset\), and all finite sets.
        Any finite set, \(\{\alpha_1, \dotsc, \alpha_n\}\), is the vanishing set of \((x - \alpha_1) \dotsm (x - \alpha_n)\).
        To show that infinite sets cannot be affine varieties here (other than \(\affine^1\)) suppose \(X = V(S)\) is infinite for some \(S \subseteq K[x]\).
        Fix some \(f \in S\).
        Then \(\{f\} \subseteq S\), so by \cref{lma:V reverses inclusion} \(V(S) \subseteq V(f)\), and so \(x \in V(f)\) for all \(x \in X\), which means that \(f(x) = 0\) for all \(x \in X\), and so \(f\) has infinitely many roots, which is not possible for a polynomial.
    \end{exm}
    
    If \(f, g \in K[x_1, \dotsc, x_n]\) vanish on \(X \subseteq \affine^n\) then so do \(f + g\) and \(f h\) for any \(h \in K[x_1, \dotsc, x_n]\).
    Thus, the set, \(S\), defining an affine variety, \(X = V(S)\), is certainly not unique.
    We can always add \(f + g\) and \(fh\).
    From this we see that \(V(S) = V(\langle S \rangle)\) where \(\langle S \rangle \subideal K[x_1, \dotsc, x_n]\) is the ideal generated by \(S\).
    This means that any affine variety can be expressed as the vanishing set of some ideal of a polynomial ring.
    
    Hilbert's basis theorem (\cref{thm:hilberts basis theorem,crl:poly ring over noetherian is noetherian}) along with a standard characterisation of noetherian rings (\cref{lma:noetherian iff all ideals finitely generated}) tells us that all ideals of \(K[x_1, \dotsc, x_n]\) are finitely generated.
    Given an affine variety, \(X = V(S)\), we can then take \(X = V(\langle S \rangle)\), and then we can find some finite generating set for this ideal, \(S'\).
    Then \(X = V(S')\).
    Thus, every affine variety is the zero locus of a finite set of polynomials.
    
    \begin{dfn}{Radical}{}
        Let \(R\) be a ring with ideal \(J\).
        The \defineindex{radical} of \(J\) is
        \begin{equation}
            \sqrt{J} = \{f \in R \mid f^k \in J \text{ for some } k \in \naturals\}.
        \end{equation}
        We say \(J\) is \define{radical} if \(J = \sqrt{J}\).
    \end{dfn}
    
    \begin{lma}{}{lma:ideal is subset of its radical}
        Let \(J \subideal R\).
        Then \(J \subseteq \sqrt{J}\).
        \begin{proof}
            Suppose that \(f \in J\), then \(f^1 \in J\), and so \(f \in \sqrt{J}\).
        \end{proof}
    \end{lma}
    
    We can now state some results which are the analogues of \cref{lma:V reverses inclusion,lma:union of defining equations,lma:intersection of defining equations} when we work with zero loci of ideals.
    
    \begin{lma}{}{}
        Let \(J \subideal K[x_1, \dotsc, x_n]\).
        Then \(V(\sqrt{J}) = V(J)\).
        \begin{proof}
            First, \cref{lma:ideal is subset of its radical} gives us \(J \subseteq \sqrt{J}\).
            Thus, by \cref{lma:V reverses inclusion} we have that \(V(\sqrt{J}) \subseteq V(J)\).
            
            Now suppose that \(x \in V(J)\) and \(f \in \sqrt{J}\).
            Then \(f^k \in J\), so \(f^k(x) = 0\), and since we're in a field with no nonzero zero divisors we must have that \(f(x) = 0\), and so \(x \in V(\sqrt{J})\).
        \end{proof}
    \end{lma}
    
    This result, combined with our earlier analysis, means that every affine variety is the zero locus of a radical ideal.
    
    \begin{lma}{Union}{}
        If \(J_1, J_2 \subideal K[x_1, \dotsc, x_n]\) then \(V(J_1) \cup V(J_2) = V(J_1 J_2) = V(J_1 \cap J_2)\).
        \begin{proof}
            That \(V(J_1) \cup V(J_2) = V(J_1 J_2)\) is \cref{lma:union of defining equations}.
            It remains to show that \(V(J_1 J_2) = V(J_1 \cap J_2)\).
            Note that it is not generally true that \(J_1 J_2 \stackrel{!}{=} J_1 \cap J_2\).
            However, it is true that \(\sqrt{J_1J_2} = \sqrt{J_1 \cap J_2}\) (\cref{lma:radical of product is radical of intersection}), and the result follows from this.
        \end{proof}
    \end{lma}
    
    \begin{lma}{Intersection}{}
        If \(J_1, J_2 \subideal K[x_1, \dotsc, x_n]\) then \(V(J_1) \cap V(J_2) = V(J_1 + J_2)\).
        \begin{proof}
            From \cref{lma:intersection of defining equations} we have that \(V(J_1) \cap V(J_2) = V(J_1 \cup J_2)\).
            We also have that \(\langle J_1 \cup J_2 \rangle = J_1 + J_2\), so \(V(J_1 \cup J_2) = V(\langle J_1 \cup J_2 \rangle) = V(J_1 + J_2)\).
        \end{proof}
    \end{lma}
    
    \begin{remark}{}{}
        With these results we have set up a pairing between geometric objects and algebraic objects.
        Specifically, we've defined a map
        \begin{align}
            V \colon \{\text{algebraic objects}\} &\to \{\text{geometric objects}\}\\
            \text{ideal} &\mapsto \text{affine variety}.
        \end{align}
        Studying the map going in the opposite direction will be the focus of the next section.
    \end{remark}
    
    \section{Ideal of an Affine Variety}
    \begin{dfn}{Ideal}{}
        Let \(X\) be a subset of \(\affine^n\).
        The \defineindex{ideal} of \(X\) is
        \begin{equation}
            I(X) \coloneq \{f \in K[x_1, \dotsc, x_n] \mid f(x) = 0 \forall x \in X\}.
        \end{equation}
    \end{dfn}
    
    This is indeed an ideal, if \(f, g \in I(X)\) then \(f(x) = g(x) = 0\) for all \(x \in X\) and \(f(x) + g(x) = 0\), so \(f + g \in I(X)\), and \(-f(x) = 0\) so \(-f \in I(X)\), and if \(h \in K[x_1,\dotsc, x_n]\) then \(f(x)h(x) = 0h(x) = 0\) so \(fh \in I(X)\).
    
    \begin{lma}{Reversal of Inclusion}{}
        Suppose \(X_1 \subseteq X_2 \subseteq \affine^n\).
        Then \(I(X_2) \subseteq I(X_1)\).
        \begin{proof}
            Suppose that \(f \in I(X_2)\), that is, \(f(x) = 0\) for all \(x \in X_2\).
            Then \(f(x) = 0\) for all \(x \in X_1 \subseteq X_2\), and so \(f \in I(X_1)\).
        \end{proof}
    \end{lma}
    
    \begin{lma}{Ideal is Radical}{}
        If \(X \subseteq \affine^n\) then \(I(X)\) is radical.
        \begin{proof}
            Suppose \(f \in \sqrt{I(X)}\).
            Then \(f^k \in I(X)\) for some \(k \in \naturals\).
            Then \(f^k(x) = 0\) for all \(x \in X\), and since we're in a field \(f(x) = 0\) for all \(x \in X\), and thus \(f \in I(X)\), and hence \(\sqrt{I(X)} \subseteq I(X)\).
            We also have \(I(X) \subseteq \sqrt{I(X)}\) by \cref{lma:ideal is subset of its radical}.
            Thus, \(I(X) = \sqrt{I(X)}\).
        \end{proof}
    \end{lma}
    
    \begin{remark}{}{}
        This gives us the other side of the pairing between algebraic objects and geometric objects:
        \begin{equation}
            I \colon \{\text{subsets of } \affine^n\} \to \{\text{radical ideals of } K[x_1, \dotsc, x_n]\}.
        \end{equation}
        These aren't quite inverses, since in this direction we only produce radical ideals.
        However, as we've seen radical ideals are good enough if we're applying \(V\).
        The following important theorem tells us that these maps, while not quite inverses, are essentially inverses, so long as we're happy to only deal with radical ideals, which we can do by liberally taking radicals.
    \end{remark}
    
    \begin{thm}{Hilbert's Nullstellensatz}{thm:hilberts nullstellensatz}
        \begin{enumerate}
            \item For any affine variety, \(X \subseteq \affine^n\), we have \(V(II(X)) = X\).
            \item For any ideal, \(J \subideal K[x_1, \dotsc, x_n]\), we have \(I(V(J)) = \sqrt{J}\).
        \end{enumerate}
        \begin{proof}
            We first prove that \(X \subseteq V(I(X))\).
            If \(x \in X\) then \(f(x) = 0\) for all \(f \in I(X)\), and thus \(x \in V(I(X))\).
            
            Next, we prove that \(\sqrt{J} \subseteq I(V(J))\).
            If \(f \in \sqrt{J}\) then \(f^k \in J\) for some \(k \in \naturals\).
            Thus, \(f^k(x) = 0\) for all \(x \in V(J)\), and so \(f(x) = 0\) for all \(x \in V(J)\), and so \(f \in I(V(J))\).
            
            Third, we prove that \(V(I(X)) \subseteq X\).
            Since \(X\) is an affine variety we know that there is some ideal, \(J \subideal K[x_1, \dotsc, x_n]\), for which \(X = V(J)\).
            Then \(\sqrt{J} \subseteq I(V(J))\) by the previous step, and \(J \subseteq \sqrt{J}\), so \(J \subseteq I(V(J))\).
            Taking the zero locus, which reverses the inclusion (\cref{lma:V reverses inclusion}), we have \(V(I(V(J))) \subseteq V(J)\).
            Since \(X = V(J)\) this is then exactly \(V(I(X)) \subseteq X\), and so combined with the first step we have that \(V(I(X)) = X\).
            
            The only hard step of the proof is showing that \(I(V(J)) \subseteq \sqrt{J}\).
            This requires some pretty heavy commutative algebra, so we'll skip it.
            It is this step of the proof which requires that \(K\) is algebraically closed.
        \end{proof}
    \end{thm}
    
    \begin{remark}{}{}
        Nullstellensatz means \enquote{theorem of the zeroes}.
    \end{remark}
    
    \begin{exm}{}{}
        Consider a nonzero ideal, \(J \subideal K[x]\).
        Since \(K[x]\) is a PID we have that \(J = \langle f \rangle\) for some \(f \in K[x]\).
        Over an algebraically closed field we can always write \(f\) as
        \begin{equation}
            f(x) = (x - a_1)^{k_1} \dotsm (x - a_r)^{k_r}
        \end{equation}
        for some \(a_i \in K\) and \(k_i, r \in \naturals\).
        Note that \(J = \langle f \rangle\) the consists of all polynomials vanishing at \(a_i\) with order at least \(k_i\).
        We therefore have \(V(J) = V(f) = \{a_1, \dotsc, a_n\} \subseteq \affine^1\).
        This affine variety captures the zeros of \(f\), but loses information about their multiplicities.
        
        Hilbert's Nullstellensatz (\cref{thm:hilberts nullstellensatz}) tells us that \(I(V(J)) = \sqrt{J}\), and in this case we have
        \begin{equation}
            \sqrt{J} = \langle (x - a_1) \dotsm (x - a_r) \rangle,
        \end{equation}
        consisting of all polynomials vanishing at \(a_i\) with \emph{any} order.
        So, \(\sqrt{J}\) too contains the information of the zeros of \(f\) while losing the information on their multiplicities.
        In this way the algebraic object, \(\sqrt{J}\), and the geometric object, \(V(J)\), contain exactly the same information.
    \end{exm}
    
    \begin{exm}{Not Algebraically Closed}{}
        Note that the fact \(K\) is algebraically closed is essential.
        In this example we'll consider the field \(\reals\), which is not algebraically closed.
        The ideal \(\langle x^2 + 1 \rangle \subideal \reals[x]\) is prime, and hence radical (\cref{lma:prime ideal is radical}).
        However, \(V(x^2 + 1) = \emptyset \ne \sqrt{\langle{x^2 + 1}}\).
        Thus, Hilbert's Nullstellensatz doesn't hold as \(I(V( x^2 + 1 )) = I(\emptyset) = \reals[x]\), when the Nullstellensatz would have \(I(V(\langle x^2 + 1)) \stackrel{!}{=} \sqrt{\langle x^2 + 1 \rangle} = \langle x^2 + 1 \rangle\), which is a proper ideal.
    \end{exm}
    
    \begin{exm}{}{exm:points of affine space 1 to 1 max ideals}
        Consider the ideal \(J = \langle x - a_1, \dotsc, x - a_n \rangle \subideal K[x_1, \dotsc, x_n]\) for some \(a_i \in K\).
        This is a maximal ideal since \(K[x_1, \dotsc, x_n]/J \isomorphic K\) (setting \(x_i = a_i\)).
        Hence, it is also prime, and so radical (\cref{lma:prime ideal is radical}).
        The vanishing set of this ideal is \(V(J) = \{a\}\) for \(a = (a_1, \dotsc, a_n) \in \affine^n\).
        Then by Hilbert's Nullstellensatz (\cref{thm:hilberts nullstellensatz}) we have
        \begin{equation}
            I(\{a\}) = I(V(J)) = \sqrt{J} = J = \langle x_1 - a_1, \dotsc, x_n - a_n \rangle.
        \end{equation}
        This lets us identify points in \(\affine^n\) with minimal non-empty affine varieties.
        By the inclusion-reversing pairings of the Nullstellensatz points in \(\affine^n\) are in one-to-one correspondence with maximal ideals in \(K[x_1, \dotsc, x_n]\).
        This gives us another pairing of algebraic and geometric objects,
        \begin{equation}
            \{\text{maximal ideals of } K[x_1, \dotsc, x_n]\} \xleftrightarrow{1:1} \{\text{points in } \affine^n\}.
        \end{equation}
        This also shows that maximal ideals of the form of \(J\) above are actually the only maximal ideals of \(K[x_1, \dotsc, x_n]\), a fact which can be proven purely algebraically, but this proof passes through geometry.
    \end{exm}
    
    We can now prove a couple of results about how \(I\) interacts with unions and intersections.
    These are analogous to the results \cref{lma:intersection of defining equations,lma:union of defining equations} for \(V\). 
    
    \begin{lma}{}{}
        Let \(X_1\) and \(X_2\) be affine varieties in \(\affine^n\).
        Then \(I(X_1 \cup X_2) = I(X_1) \cap I(X_2)\).
        \begin{proof}
            Suppose \(f \in I(X_1 \cup X_2)\).
            Then \(f\) vanishes on any point of \(X_1\) or \(X_2\), and thus \(f \in I(X_1)\) and \(f \in I(X_2)\), so \(f \in I(X_1) \cap I(X_2)\).
            
            Conversely, suppose \(f \in I(X_1) \cap I(X_2)\).
            Then \(f\) vanishes on \(X_1\) and \(X_2\), and so it vanishes on \(X_1 \cup X_2\), and hence \(f \in I(X_1 \cup X_2)\).
        \end{proof}
    \end{lma}
    
    \begin{crl}{}{}
        The intersection of two radical ideals of \(K[x_1, \dotsc, x_n]\) is again radical.
        \begin{proof}
            If \(J_1\) and \(J_2\) are radical ideals then there exist affine varieties, \(X_1\) and \(X_2\), such that \(J_1 = I(X_1)\) and \(J_2 = I(X_2)\).
            Then \(J_1 \cap J_2 = I(X_1 \cup X_2)\), which is radical since the ideal of any affine variety is radical.
        \end{proof}
    \end{crl}
    
    Note that it's possible to prove this corollary purely algebraically as well.
    
    \begin{lma}{}{lma:ideal of intersection}
        Let \(X_1\) and \(X_2\) be affine varieties in \(\affine^n\).
        Then \(I(X_1 \cap X_2) = \sqrt{I(X_1) + I(X_2)}\).
        \begin{proof}
            By Hilbert's Nullstellensatz (\cref{thm:hilberts nullstellensatz}) we have that \(X_1 = V(I(X_1))\) and \(X_2 = V(I(X_2))\).
            Thus, we have
            \begin{equation}
                I(X_1 \cap X_2) = I(V(I(X_1)) \cap V(I(X_2))).
            \end{equation}
            Then, by \cref{lma:intersection of defining equations} we have \(V(J_1) \cap V(J_2) = V(J_1 + J_2)\), and so
            \begin{equation}
                I(X_1 \cap X_2) = I(V(I(X_1) + I(X_2))).
            \end{equation}
            Then by the Nullstellensatz again we have \(I(V(J)) = \sqrt{J}\), and so
            \begin{equation*}
                I(X_1 \cap X_2) = \sqrt{I(X_1) + I(X_2)}. \qedhere
            \end{equation*}
        \end{proof}
    \end{lma}
    
    \begin{remark}{}{}
        It is not, in general, true that the sum of two radical ideals is radical.
        This shouldn't be surprising, the algebraic explanation is that exponentiating a sum doesn't behave particularly simply, we need the binomial theorem.
        This is why we have to take the radical in the lemma above.
        
        There is also a geometric explanation for this, in addition to the algebraic one.
        Consider the affine varieties \(X_1, X_2 \subseteq \affine^2_{\complex}\) with \(I(X_1) = \langle x_2 - x_1^2 \rangle\) and \(I(X_2) = \langle x_2 \rangle\).
        The real points of these varieties are shown in \cref{fig:sum radicals not radical}.
        These correspond to \(y = x^2\) and \(y = 0\), although we're only really able to visualise these for \(x, y \in \reals\).
        
        The intersection of these two varieties is \(X_1 \cap X_2 = \{(0, 0)\}\).
        Thus, \(I(X_1 \cap X_2) = I((0, 0)) = \langle x_1, x_2 \rangle\).
        Here we've used the identification of points of \(\affine_{\complex}^2\) with maximal ideals of \(\complex[x_1, x_2]\) from \cref{exm:points of affine space 1 to 1 max ideals}.
        
        We have that
        \begin{equation}
            I(X_1) + I(X_2) = \langle x_2 - x_1^2 \rangle + \langle x_2 \rangle = \langle x_2 - x_1^2, x_2 \rangle = \langle x_1^2, x_2 \rangle.
        \end{equation}
        This is not a radical ideal, we have
        \begin{equation}
            \sqrt{\langle x_1^2, x_2 \rangle} = \langle x_1, x_2 \rangle.
        \end{equation}
        Which we expect from \cref{lma:ideal of intersection}.
        
        The geometric interpretation is then as follows.
        The varieties \(X_1\) and \(X_2\) are tangent at their intersection point.
        Thus, in a linear approximation their defining equations, \(x_2 = x_1^2\) and \(x_2 = 0\), are the same, and both pick out the \(x_1\) axis.
        This means we can imagine that the intersection, \(X_1 \cap X_2\), actually extends a small distance from the origin, an infinitesimal amount in the \(x_1\) direction.
        But, in this extended region \(x_1\) doesn't vanish, and so it doesn't lie in \(I(X_1) + I(X_2)\).
        
        There are various ways to deal with this problem.
        One is to keep track of the multiplicities of curve intersections.
        The algebraic-geometry approach is to define schemes.
        These enlarge our class of geometric objects to include \enquote{objects extending by infinitesimally small amounts in some direction}.
        Then the result that we get mirroring that of Hilbert's Nullstellensatz (\cref{thm:hilberts nullstellensatz}) is that affine schemes are in one-to-one correspondence with \emph{arbitrary} ideals of \(K[x_1, \dotsc, x_n]\).
        Then the intersection of \(X_1\) and \(X_2\) is replaced with the scheme corresponding to the non-radical ideal \(\langle x_1, x_2^2 \rangle\).
        % TODO: reference to section on schemes
    \end{remark}
    
    \begin{figure}
        \centering
        \tikzsetnextfilename{sum-radicals-not-radical}
        \begin{tikzpicture}
            \draw [very thick, my blue] (-3, 0) -- (3, 0) node [right] {\(X_2\)};
            \draw [very thick, my red, domain=-3:3, samples=100] plot (\x, \x*\x/2) node [below right] {\(X_1\)};
            \fill [my green] (0, 0) circle [radius = 0.1] node [below] {\(X_1 \cap X_2\)};
        \end{tikzpicture}
        \caption[Sum of radicals not radical]{The two varieties used to demonstrate why the sum of radical ideals is not necessarily radical.}
        \label{fig:sum radicals not radical}
    \end{figure}
    
    If \(J \subideal K[x_1, \dotsc, x_n]\) is proper then \(J\) has a zero, that is \(V(J)\) is non-empty.
    Otherwise, we'd have that \(\sqrt{J} = I(V(J)) = I(\emptyset) = K[x_1, \dotsc, x_n]\), which means \(1 \in \sqrt{J}\) and so \(1 \in J\) meaning \(J = K[x_1, \dotsc, x_n]\), violating the assumption that \(J\) is proper.
    
    \begin{prp}{Weak Nullstellensatz}{}
        If \(J\) is a proper ideal of \(K[x_1, \dotsc, x_n]\) then \(V(J)\) is non-empty.
    \end{prp}
    
    \begin{remark}{}{}
        Historically the weak nullstellensatz was proven first.
        This result is the reason for the name, \enquote{theorem of the zeros}.
        Despite the \enquote{weak} in the name of this result the weak Nullstellensatz is actually equivalent to the full Nullstellensatz.
        There's a trick, known as Rabinowitsch's trick, which allows one to reduce the full Nullstellensatz in \(n\) variables to the weak Nullstellensatz in \(n + 1\) variables.
    \end{remark}
    
    \appendixpage
    \begin{appendices}
        \include{appendices/comm-alg}
    \end{appendices}
    \backmatter
    \renewcommand{\glossaryname}{Acronyms}
    \printglossary[acronym]
    \printindex
\end{document}